"use strict";(self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[]).push([[518],{8518:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var a=n(3673);const r=(0,a._)("h4",{class:"q-mt-md q-mb-md"},"Ignition Tables",-1),o=(0,a._)("h6",{class:"q-mt-md q-mb-lg"},"you can view and edit ignition tables from here",-1),i={class:"row q-pa-lg",style:{width:"100%"}},l=(0,a._)("span",{class:"q-mr-md"},null,-1),s=(0,a.Uk)("get table info from EFI "),c=(0,a._)("span",{class:"col-2 gt-xs"},null,-1),d=(0,a._)("span",{class:"q-mr-md"},null,-1),u=(0,a.Uk)("write tables to EFI "),m=(0,a._)("span",{class:"q-mr-md"},null,-1),p=(0,a.Uk)("write tables to EFI "),f=(0,a._)("div",{class:"text-h6 q-mb-md"},"RPM/Load (Kpa)",-1),b=(0,a._)("div",{class:"text-h6"},"Load/Temp",-1),y=(0,a.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. "),w=(0,a._)("div",{class:"text-h6"},"RPM/Battery",-1),g=(0,a.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ");function h(e,t,n,h,_,U){const q=(0,a.up)("q-btn"),v=(0,a.up)("q-linear-progress"),A=(0,a.up)("q-tab"),k=(0,a.up)("q-tabs"),P=(0,a.up)("q-separator"),T=(0,a.up)("canvas-datagrid"),I=(0,a.up)("q-tab-panel"),x=(0,a.up)("q-tab-panels"),S=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",null,[r,o,(0,a._)("div",i,[(0,a.Wm)(q,{flat:"",icon:"download",color:"primary",onClick:e.requestTable,rounded:""},{default:(0,a.w5)((()=>[l,s])),_:1},8,["onClick"]),c,(0,a.Wm)(q,{icon:"file_upload",color:"secondary",class:"gt-xs",rounded:"",onClick:e.pathTable},{default:(0,a.w5)((()=>[d,u])),_:1},8,["onClick"]),(0,a.Wm)(q,{icon:"file_upload",color:"secondary",class:"xs q-mt-md",rounded:"",onClick:e.pathTable},{default:(0,a.w5)((()=>[m,p])),_:1},8,["onClick"])]),e.$store.state.Ignition.tables_loading?((0,a.wg)(),(0,a.j4)(v,{key:0,class:"q-mb-lg q-mt-md",indeterminate:"",rounded:"",size:"15px","animation-speed":"600"})):(0,a.kq)("",!0),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{name:"rpmload",label:"RPM/Load"}),(0,a.Wm)(A,{name:"loadtemp",label:"Load/Temp"}),(0,a.Wm)(A,{name:"rpmbattery",label:"RPM/Battery",disable:""})])),_:1},8,["modelValue"]),(0,a.Wm)(P),(0,a.Wm)(x,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{name:"rpmload"},{default:(0,a.w5)((()=>[f,null!==e.tables.rpm_load?((0,a.wg)(),(0,a.j4)(T,{key:0,".data":e.tables.rpm_load,showRowHeaders:"false",showColumnHeaders:"false",class:"ignition_table"},null,8,[".data"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(I,{name:"loadtemp"},{default:(0,a.w5)((()=>[b,y])),_:1}),(0,a.Wm)(I,{name:"rpmbattery"},{default:(0,a.w5)((()=>[w,g])),_:1})])),_:1},8,["modelValue"])])),_:1})])}var _=n(1959);const U={ignition_rpm_load:{5:"#536dfe",10:"#448aff",14:"#00b0ff",23:"#ff0",27:"#ffca28",30:"#ffc107",33:"#ff9100",36:"#ef5350"}};let q=U.ignition_rpm_load;const v=e=>{const t=e;if(!(Number(t.cell.boundRowIndex)<1||Number(t.cell.boundColumnIndex)<1))for(const n in q){const e=q[n];Number(t.cell.value)>=Number(n)&&(t.ctx.fillStyle=e)}},A=(e,t,n,a)=>{const r=document.querySelector(`.${a}`);if(r){const e=r,{width:a}=e.getBoundingClientRect();e.style.cellWidth=80,e.style.cellWidth=a/n>60?a/n-.15:60,e.style.width="100%",t.disconnect(),r.addEventListener("rendercell",v)}},k=(e,t)=>{const n=document.querySelector(`.${t}`);if(n)A({},{disconnect:()=>{}},e,t);else{const n=new MutationObserver(((n,a)=>A(n,a,e,t))),a=document.body;n.observe(a,{childList:!0,subtree:!0})}},P=e=>{const t=document.querySelector(`.${e}`);null===t||void 0===t||t.removeEventListener("rendercell",v)};var T=n(2156),I=n(3617),x=n(8643);const S=(e=1,t)=>{const n=1,a=("0000"+(0,x.Z)([e,...t].slice(0,126)).toString(16)).substr(-4);return{protocol:n,command:e,payload:t,checksum:a}},W=[S(30,new Uint8Array([85,68,65,50,77,68,69,61])),S(30,new Uint8Array([85,68,65,50,77,69,69,61])),S(30,new Uint8Array([85,68,65,50,77,122,73,75])),S(30,new Uint8Array([85,68,65,50,78,68,103,61])),S(30,new Uint8Array([85,68,65,50,78,68,73,61]))],C=[S(20,new Uint8Array([0,0,0,0,96,234,0,0,248,36,1,0,176,173,1,0,224,34,2,0,16,152,2,0,64,13,3,0,112,130,3,0,160,247,3,0,208,108,4,0,0,226,4,0,48,87,5,0,96,204,5,0,144,65,6,0,192,182,6,0,240,43,7,0,176,113,11,0])),S(20,new Uint8Array([196,9,0,0,20,5,0,0,232,3,0,0,74,6,0,0,138,7,0,0,212,8,0,0,30,10,0,0,94,11,0,0,168,12,0,0,242,13,0,0,96,14,0,0,96,14,0,0,96,14,0,0,96,14,0,0,96,14,0,0,96,14,0,0,96,14,0,0])),S(20,new Uint8Array([184,11,0,0,20,5,0,0,232,3,0,0,54,6,0,0,118,7,0,0,182,8,0,0,246,9,0,0,64,11,0,0,128,12,0,0,192,13,0,0,46,14,0,0,46,14,0,0,46,14,0,0,46,14,0,0,46,14,0,0,46,14,0,0,46,14,0,0])),S(20,new Uint8Array([172,13,0,0,20,5,0,0,232,3,0,0,34,6,0,0,98,7,0,0,152,8,0,0,216,9,0,0,24,11,0,0,88,12,0,0,152,13,0,0,6,14,0,0,6,14,0,0,6,14,0,0,6,14,0,0,6,14,0,0,6,14,0,0,6,14,0,0])),S(20,new Uint8Array([160,15,0,0,20,5,0,0,232,3,0,0,14,6,0,0,68,7,0,0,132,8,0,0,186,9,0,0,250,10,0,0,48,12,0,0,112,13,0,0,212,13,0,0,212,13,0,0,212,13,0,0,212,13,0,0,212,13,0,0,212,13,0,0,212,13,0,0])),S(20,new Uint8Array([148,17,0,0,20,5,0,0,232,3,0,0,250,5,0,0,48,7,0,0,102,8,0,0,156,9,0,0,210,10,0,0,8,12,0,0,62,13,0,0,172,13,0,0,172,13,0,0,172,13,0,0,172,13,0,0,172,13,0,0,172,13,0,0,172,13,0,0])),S(20,new Uint8Array([136,19,0,0,20,5,0,0,232,3,0,0,230,5,0,0,18,7,0,0,72,8,0,0,126,9,0,0,170,10,0,0,224,11,0,0,22,13,0,0,122,13,0,0,122,13,0,0,122,13,0,0,122,13,0,0,122,13,0,0,122,13,0,0,122,13,0,0])),S(20,new Uint8Array([124,21,0,0,20,5,0,0,232,3,0,0,210,5,0,0,254,6,0,0,42,8,0,0,96,9,0,0,140,10,0,0,184,11,0,0,228,12,0,0,82,13,0,0,82,13,0,0,82,13,0,0,82,13,0,0,82,13,0,0,82,13,0,0,82,13,0,0])),S(20,new Uint8Array([112,23,0,0,20,5,0,0,232,3,0,0,190,5,0,0,234,6,0,0,22,8,0,0,56,9,0,0,100,10,0,0,144,11,0,0,188,12,0,0,32,13,0,0,32,13,0,0,32,13,0,0,32,13,0,0,32,13,0,0,32,13,0,0,32,13,0,0])),S(20,new Uint8Array([200,25,0,0,20,5,0,0,232,3,0,0,160,5,0,0,204,6,0,0,238,7,0,0,26,9,0,0,60,10,0,0,94,11,0,0,138,12,0,0,238,12,0,0,238,12,0,0,238,12,0,0,238,12,0,0,238,12,0,0,238,12,0,0,238,12,0,0])),S(20,new Uint8Array([188,27,0,0,20,5,0,0,232,3,0,0,150,5,0,0,184,6,0,0,208,7,0,0,242,8,0,0,20,10,0,0,54,11,0,0,88,12,0,0,188,12,0,0,188,12,0,0,188,12,0,0,188,12,0,0,188,12,0,0,188,12,0,0,188,12,0,0])),S(20,new Uint8Array([176,29,0,0,20,5,0,0,232,3,0,0,130,5,0,0,154,6,0,0,188,7,0,0,212,8,0,0,246,9,0,0,14,11,0,0,48,12,0,0,148,12,0,0,148,12,0,0,148,12,0,0,148,12,0,0,148,12,0,0,148,12,0,0,148,12,0,0])),S(20,new Uint8Array([164,31,0,0,20,5,0,0,232,3,0,0,110,5,0,0,134,6,0,0,158,7,0,0,182,8,0,0,206,9,0,0,240,10,0,0,8,12,0,0,98,12,0,0,98,12,0,0,98,12,0,0,98,12,0,0,98,12,0,0,98,12,0,0,98,12,0,0])),S(20,new Uint8Array([152,33,0,0,20,5,0,0,232,3,0,0,90,5,0,0,104,6,0,0,128,7,0,0,152,8,0,0,176,9,0,0,200,10,0,0,214,11,0,0,58,12,0,0,58,12,0,0,58,12,0,0,58,12,0,0,58,12,0,0,58,12,0,0,58,12,0,0])),S(20,new Uint8Array([140,35,0,0,244,1,0,0,232,3,0,0,70,5,0,0,84,6,0,0,98,7,0,0,122,8,0,0,136,9,0,0,160,10,0,0,174,11,0,0,8,12,0,0,8,12,0,0,8,12,0,0,8,12,0,0,8,12,0,0,8,12,0,0,8,12,0,0])),S(20,new Uint8Array([128,37,0,0,244,1,0,0,232,3,0,0,50,5,0,0,64,6,0,0,78,7,0,0,92,8,0,0,106,9,0,0,120,10,0,0,134,11,0,0,224,11,0,0,224,11,0,0,224,11,0,0,224,11,0,0,224,11,0,0,224,11,0,0,224,11,0,0])),S(20,new Uint8Array([116,39,0,0,244,1,0,0,232,3,0,0,30,5,0,0,34,6,0,0,48,7,0,0,52,8,0,0,66,9,0,0,80,10,0,0,84,11,0,0,174,11,0,0,174,11,0,0,174,11,0,0,174,11,0,0,174,11,0,0,174,11,0,0,174,11,0,0]))];S(12,new Uint8Array([0,0,0,0,0]));function O(){var e,t,n,a;function r(e,t){var o;if(isNaN(e)&&isNaN(t)&&"number"===typeof e&&"number"===typeof t)return!0;if(e===t)return!0;if("function"===typeof e&&"function"===typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(n.indexOf(e)>-1||a.indexOf(t)>-1)return!1;for(o in t){if(t.hasOwnProperty(o)!==e.hasOwnProperty(o))return!1;if(typeof t[o]!==typeof e[o])return!1}for(o in e){if(t.hasOwnProperty(o)!==e.hasOwnProperty(o))return!1;if(typeof t[o]!==typeof e[o])return!1;switch(typeof e[o]){case"object":case"function":if(n.push(e),a.push(t),!r(e[o],t[o]))return!1;n.pop(),a.pop();break;default:if(e[o]!==t[o])return!1;break}}return!0}if(arguments.length<1)return!0;for(e=1,t=arguments.length;e<t;e++)if(n=[],a=[],!r(arguments[0],arguments[e]))return!1;return!0}let R=null;const L=(0,a.aZ)({name:"Ignition",components:{},mounted(){k(17,"ignition_table")},beforeUnmount(){P("ignition_table")},methods:{requestTable(){this.store.dispatch("Ignition/requestIgnitionTableRPMTPS");const e=()=>{const e=this.store.getters["UsbLayer/getCommand"](127);e&&(console.log("table available"),clearInterval(R),this.store.dispatch("Ignition/getIgnitionTableRPMTPS"))};this.intTable=setInterval(e,500)},pathTable(){const e=S(27,new Uint8Array([255]));this.store.dispatch("UsbLayer/putCommand",e)}},setup(){const e=(0,_.iH)("rpmload"),t=(0,I.oR)(T.storeKey),n=t.state.Ignition.tables;let r=!1;const o=e=>JSON.parse(JSON.stringify(e)),i=(0,_.qj)({rpm_load:o(n.rpm_load)});return(0,a.m0)((()=>{})),(0,a.m0)((()=>{e.value&&(P("ignition_table"),k(17,"ignition_table"))})),(0,a.m0)((()=>{i.rpm_load=o(n.rpm_load)})),(0,a.YP)(i,(e=>{if(O(i.rpm_load,(0,_.IU)(e).rpm_load)){if(!r)return void(r=!0);console.log("table have changed",(0,_.IU)(e)),t.dispatch("Ignition/updateTableRPMTPS",e.rpm_load),r=!1}}),{deep:!0}),{tab:e,store:t,tables:i,intTable:R}}});var N=n(4260),Z=n(151),M=n(9400),Q=n(1598),j=n(2496),E=n(3269),V=n(5869),B=n(5906),$=n(6602),D=n(7518),F=n.n(D);const H=(0,N.Z)(L,[["render",h]]),J=H;F()(L,"components",{QCard:Z.Z,QBtn:M.Z,QLinearProgress:Q.Z,QTabs:j.Z,QTab:E.Z,QSeparator:V.Z,QTabPanels:B.Z,QTabPanel:$.Z})}}]);