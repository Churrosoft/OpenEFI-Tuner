"use strict";(self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[]).push([[900],{6900:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var r=a(3673);const o=(0,r._)("span",{class:"q-mr-md"},null,-1),n=(0,r.Uk)("Request Dashboard ");function s(e,t,a,s,l,c){const d=(0,r.up)("RPMGauge"),i=(0,r.up)("Battery"),u=(0,r.up)("q-btn"),g=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(g,{class:"row items-center justify-evenly"},{default:(0,r.w5)((()=>{var t;return[(0,r.Wm)(d),(0,r.Wm)(i,{value:String(null!==(t=e.store.state.Dashboard.battery)&&void 0!==t?t:"0000")},null,8,["value"]),(0,r.Wm)(u,{color:"secondary",class:"gt-xs",rounded:"",onClick:e.requestMetadata},{default:(0,r.w5)((()=>[o,n])),_:1},8,["onClick"])]})),_:1})}var l=a(1959),c=a(1767),d=a(8332),i=a(3617);const u={id:"canvas-id","data-type":"radial-gauge"};function g(e,t,a,o,n,s){return(0,r.wg)(),(0,r.iD)("canvas",u)}var m=a(4095);const p={renderTo:"canvas-id",width:400,height:400,units:"",title:"RPM",minValue:0,maxValue:8500,majorTicks:[0,750,1e3,1500,3e3,4e3,4500,5e3,6e3,7e3,8e3],minorTicks:2,strokeTicks:!0,highlights:[],ticksAngle:225,startAngle:67.5,colorMajorTicks:"#ddd",colorMinorTicks:"#ddd",colorTitle:"#eee",colorUnits:"#ccc",colorNumbers:"#eee",colorPlate:"#222",borderShadowWidth:0,borders:!0,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:100,animationRule:"linear",colorBorderOuter:"#333",colorBorderOuterEnd:"#111",colorBorderMiddle:"#222",colorBorderMiddleEnd:"#111",colorBorderInner:"#111",colorBorderInnerEnd:"#333",colorNeedleShadowDown:"#333",colorNeedleCircleOuter:"#333",colorNeedleCircleOuterEnd:"#111",colorNeedleCircleInner:"#111",colorNeedleCircleInnerEnd:"#222",valueBoxBorderRadius:0,colorValueBoxRect:"#222",colorValueBoxRectEnd:"#333"};let h=null;const b=(0,r.aZ)({name:"RPMGauge",components:{},mounted:()=>{h=new m.RadialGauge(p),h.draw(),h.value=0,h.update(Object.assign(Object.assign({},p),{maxValue:6500,majorTicks:[0,750,1e3,1500,3e3,4e3,4500,5e3,6e3]})),h.draw()},methods:{sendHello(){console.log("asdas")}},setup(){const e=(0,i.oR)(d.storeKey);return(0,r.m0)((()=>{const t=e.state.Dashboard.rpm;null!==t&&null!==h&&(h.value=t)})),(0,r.m0)((()=>{const t=e.state.Dashboard.gaugeOptions.rpm;null!==t&&null!==h&&h.update(Object.assign(Object.assign({},p),t))})),{store:e}}});var v=a(4260);const y=(0,v.Z)(b,[["render",g]]),_=y;var w=a(2323);const f=(0,r._)("h5",null,"Battery",-1),k={class:"battery__digit-container"},C={class:"battery__digit-container--digits"},B={class:"battery__dseg-display"},D=(0,r._)("h4",{class:"battery__dseg-display__background"},"8888",-1),I=(0,r._)("h4",{class:"battery__digit-container--volts"},"V",-1);function M(e,t,a,o,n,s){const l=(0,r.up)("q-card-section"),c=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,{class:"battery"},{default:(0,r.w5)((()=>[f,(0,r._)("span",k,[(0,r._)("div",C,[(0,r._)("h4",B,(0,w.zw)(e.value.padStart(5,"!")),1),D]),I])])),_:1})])),_:1})}const R=(0,r.aZ)({name:"Battery",props:["value"],setup(){return{}}});var j=a(151),O=a(5589),S=a(7518),U=a.n(S);const Z=(0,v.Z)(R,[["render",M]]),q=Z;U()(R,"components",{QCard:j.Z,QCardSection:O.Z});let T=null;const A=(0,r.aZ)({name:"Dashboard",components:{RPMGauge:_,Battery:q},methods:{requestMetadata(){this.store.dispatch("Dashboard/requestGaugeConfig"),localStorage.setItem("DashboardActive","true")}},beforeUnmount(){clearInterval(T)},mounted(){if(localStorage.getItem("DashboardActive")){const e=()=>{const e=(0,c.k)(5,new Uint8Array([255]));this.store.state.UsbLayer.connected?this.store.dispatch("UsbLayer/sendMessage",e):clearInterval(T)};localStorage.removeItem("DashboardActive"),T=setInterval(e,1e3)}},setup(){const e=(0,i.oR)(d.storeKey),t=(0,l.Fl)((()=>e.getters["UsbLayer/getCommand"](14))),a=(0,l.Fl)((()=>e.getters["UsbLayer/getCommand"](15)));return(0,r.m0)((()=>{if(t.value){e.dispatch("Dashboard/updateGaugeConfig",t.value);const a=()=>{const t=(0,c.k)(5,new Uint8Array([255]));e.dispatch("UsbLayer/sendMessage",t)};T=setInterval(a,1e3)}})),(0,r.m0)((()=>{a.value&&e.dispatch("Dashboard/parseStatus",a.value)})),{store:e}}});var x=a(4379),E=a(9400);const G=(0,v.Z)(A,[["render",s]]),N=G;U()(A,"components",{QPage:x.Z,QBtn:E.Z})}}]);