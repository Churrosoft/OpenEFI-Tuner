"use strict";(self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[]).push([[313],{313:(e,r,t)=>{t.r(r),t.d(r,{default:()=>G});var a=t(3673);const o=(0,a._)("span",{class:"q-mr-md"},null,-1),n=(0,a.Uk)("Request Dashboard ");function s(e,r,t,s,l,c){const d=(0,a.up)("RPMGauge"),i=(0,a.up)("Battery"),u=(0,a.up)("q-btn"),g=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(g,{class:"row items-center justify-evenly"},{default:(0,a.w5)((()=>{var r;return[(0,a.Wm)(d),(0,a.Wm)(i,{value:String(null!==(r=e.store.state.Dashboard.battery)&&void 0!==r?r:"0000")},null,8,["value"]),(0,a.Wm)(u,{color:"secondary",class:"gt-xs",rounded:"",onClick:e.requestMetadata},{default:(0,a.w5)((()=>[o,n])),_:1},8,["onClick"])]})),_:1})}const l={id:"canvas-id","data-type":"radial-gauge"};function c(e,r,t,o,n,s){return(0,a.wg)(),(0,a.iD)("canvas",l)}var d=t(4095),i=t(8332),u=t(3617);const g={renderTo:"canvas-id",width:400,height:400,units:"",title:"RPM",minValue:0,maxValue:8500,majorTicks:[0,750,1e3,1500,3e3,4e3,4500,5e3,6e3,7e3,8e3],minorTicks:2,strokeTicks:!0,highlights:[{from:-15,to:0,color:"rgba(0,0, 255, .3)"},{from:0,to:50,color:"rgba(255, 0, 0, .3)"}],ticksAngle:225,startAngle:67.5,colorMajorTicks:"#ddd",colorMinorTicks:"#ddd",colorTitle:"#eee",colorUnits:"#ccc",colorNumbers:"#eee",colorPlate:"#222",borderShadowWidth:0,borders:!0,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:100,animationRule:"linear",colorBorderOuter:"#333",colorBorderOuterEnd:"#111",colorBorderMiddle:"#222",colorBorderMiddleEnd:"#111",colorBorderInner:"#111",colorBorderInnerEnd:"#333",colorNeedleShadowDown:"#333",colorNeedleCircleOuter:"#333",colorNeedleCircleOuterEnd:"#111",colorNeedleCircleInner:"#111",colorNeedleCircleInnerEnd:"#222",valueBoxBorderRadius:0,colorValueBoxRect:"#222",colorValueBoxRectEnd:"#333"};let m=null;const p=(0,a.aZ)({name:"RPMGauge",components:{},mounted:()=>{m=new d.RadialGauge(g),m.draw(),m.value=0,m.update(Object.assign(Object.assign({},g),{maxValue:6500,majorTicks:[0,750,1e3,1500,3e3,4e3,4500,5e3,6e3]})),m.draw()},methods:{sendHello(){console.log("asdas")}},setup(){const e=(0,u.oR)(i.storeKey);return(0,a.m0)((()=>{const r=e.state.Dashboard.rpm;null!==r&&null!==m&&(m.value=r)})),{store:e}}});var h=t(4260);const v=(0,h.Z)(p,[["render",c]]),b=v;var y=t(2323);const _=(0,a._)("h5",null,"Battery",-1),w={class:"battery__digit-container"},f={class:"battery__digit-container--digits"},C={class:"battery__dseg-display"},k=(0,a._)("h4",{class:"battery__dseg-display__background"},"8888",-1),B=(0,a._)("h4",{class:"battery__digit-container--volts"},"V",-1);function D(e,r,t,o,n,s){const l=(0,a.up)("q-card-section"),c=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{class:"battery"},{default:(0,a.w5)((()=>[_,(0,a._)("span",w,[(0,a._)("div",f,[(0,a._)("h4",C,(0,y.zw)(e.value.padStart(5,"!")),1),k]),B])])),_:1})])),_:1})}const I=(0,a.aZ)({name:"Battery",props:["value"],setup(){return{}}});var M=t(151),R=t(5589),Z=t(7518),S=t.n(Z);const q=(0,h.Z)(I,[["render",D]]),T=q;S()(I,"components",{QCard:M.Z,QCardSection:R.Z});var U=t(1959),j=t(1767);let x=null;const A=(0,a.aZ)({name:"PageIndex",components:{RPMGauge:b,Battery:T},methods:{requestMetadata(){this.store.dispatch("Dashboard/requestGaugeConfig"),localStorage.setItem("DashboardActive","true")}},beforeUnmount(){clearInterval(x)},mounted(){if(localStorage.getItem("DashboardActive")){const e=()=>{const e=(0,j.k)(5,new Uint8Array([255]));this.store.dispatch("UsbLayer/sendMessage",e)};localStorage.removeItem("DashboardActive"),x=setInterval(e,1e3)}},setup(){const e=(0,u.oR)(i.storeKey),r=(0,U.Fl)((()=>e.getters["UsbLayer/getCommand"](14))),t=(0,U.Fl)((()=>e.getters["UsbLayer/getCommand"](15)));return(0,a.m0)((()=>{if(r.value){e.dispatch("Dashboard/updateGaugeConfig",r.value);const t=()=>{const r=(0,j.k)(5,new Uint8Array([255]));e.dispatch("UsbLayer/sendMessage",r)};x=setInterval(t,1e3)}})),(0,a.m0)((()=>{t.value&&e.dispatch("Dashboard/parseStatus",t.value)})),{store:e}}});var O=t(4379),P=t(9400);const E=(0,h.Z)(A,[["render",s]]),G=E;S()(A,"components",{QPage:O.Z,QCard:M.Z,QCardSection:R.Z,QBtn:P.Z})}}]);