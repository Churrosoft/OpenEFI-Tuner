"use strict";(self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[]).push([[64],{3683:(e,t,n)=>{n.d(t,{Z:()=>ie});var a=n(3673),i=n(2323);const o=(0,a.Uk)("OpenEFI | Tuner"),r={key:0,class:"q-mr-lg q-ml-xl"},l={key:0},s={key:1},c={key:2},u=(0,a._)("span",null," v",-1);function d(e,t,n,d,p,m){const g=(0,a.up)("q-btn"),f=(0,a.up)("q-toolbar-title"),k=(0,a.up)("q-space"),w=(0,a.up)("q-toggle"),h=(0,a.up)("Connect"),b=(0,a.up)("q-toolbar"),y=(0,a.up)("q-linear-progress"),v=(0,a.up)("q-header"),q=(0,a.up)("NavBar"),L=(0,a.up)("router-view"),_=(0,a.up)("q-page"),Z=(0,a.up)("q-page-container"),D=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(D,{view:"hHh Lpr lff",container:"",style:{height:"100vh"},class:"shadow-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{elevated:"",class:"bg-black"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{flat:"",onClick:e.toggleLeftDrawer,round:"",dense:"",icon:"menu"},null,8,["onClick"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(k),(0,a.Wm)(w,{"onUpdate:modelValue":t[0]||(t[0]=t=>e.q.dark.toggle()),"model-value":e.q.dark.isActive,label:"Dark Mode"},null,8,["model-value"]),e.$store.state.UsbLayer.paired?((0,a.wg)(),(0,a.iD)("div",r,["0"===e.$store.state.UsbLayer.firmware_ver.type?((0,a.wg)(),(0,a.iD)("span",l,"OpenEFI")):(0,a.kq)("",!0),"1"===e.$store.state.UsbLayer.firmware_ver.type?((0,a.wg)(),(0,a.iD)("span",s,"uEFI")):(0,a.kq)("",!0),"2"===e.$store.state.UsbLayer.firmware_ver.type?((0,a.wg)(),(0,a.iD)("span",c,"DashDash")):(0,a.kq)("",!0),u,(0,a._)("span",null,(0,i.zw)(e.$store.state.UsbLayer.firmware_ver.major),1),(0,a._)("span",null,"."+(0,i.zw)(e.$store.state.UsbLayer.firmware_ver.minor),1),(0,a._)("span",null,"."+(0,i.zw)(e.$store.state.UsbLayer.firmware_ver.rev),1)])):(0,a.kq)("",!0),(0,a.Wm)(h)])),_:1}),e.$store.state.UsbLayer.connecting||e.$store.state.Dashboard.loading?((0,a.wg)(),(0,a.j4)(y,{key:0,class:"q-mb-lg q-mt-md",indeterminate:"",rounded:"",size:"5px","animation-speed":"600"})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(q),(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(L)])),_:1})])),_:1})])),_:1})}function p(e,t,n,i,o,r){const l=(0,a.up)("EssentialLink"),s=(0,a.up)("q-list"),c=(0,a.up)("q-scroll-area"),u=(0,a.up)("q-drawer");return(0,a.wg)(),(0,a.j4)(u,{"onUpdate:modelValue":t[0]||(t[0]=t=>e.toggleLeftDrawer()),"model-value":e.$store.state.Layout.toogleMenu,"show-if-above":"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"fit"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.essentialLinks,(e=>((0,a.wg)(),(0,a.j4)(l,(0,a.dG)({key:e.title},e),null,16)))),128))])),_:1})])),_:1})])),_:1},8,["model-value"])}const m={key:1,class:"q-mr-xl"};function g(e,t,n,o,r,l){var s,c;const u=(0,a.up)("q-icon"),d=(0,a.up)("q-item-section"),p=(0,a.up)("q-item-label"),g=(0,a.up)("q-item"),f=(0,a.up)("EssentialLink",!0),k=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(null===(s=e.innerItems)||void 0===s?void 0:s.length)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g,{key:0,clickable:"",tag:"a",target:e.link?e.link.startsWith("#")?"":"_blank":"",href:e.link},{default:(0,a.w5)((()=>[e.icon?((0,a.wg)(),(0,a.j4)(d,{key:0,avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:e.icon},null,8,["name"])])),_:1})):(0,a.kq)("",!0),e.icon?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",m)),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:1}),(0,a.Wm)(p,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.caption),1)])),_:1})])),_:1})])),_:1},8,["target","href"])),(null===(c=e.innerItems)||void 0===c?void 0:c.length)?((0,a.wg)(),(0,a.j4)(k,{key:1,"expand-separator":"",icon:e.icon,label:e.title,caption:e.caption},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.innerItems,(e=>((0,a.wg)(),(0,a.j4)(f,(0,a.dG)({key:e.title},e,{class:"q-mr-md"}),null,16)))),128))])),_:1},8,["icon","label","caption"])):(0,a.kq)("",!0)],64)}const f=(0,a.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""},innerItems:Array}});var k=n(4260),w=n(3414),h=n(2035),b=n(4554),y=n(2350),v=n(5150),q=n(7518),L=n.n(q);const _=(0,k.Z)(f,[["render",g]]),Z=_;L()(f,"components",{QItem:w.Z,QItemSection:h.Z,QIcon:b.Z,QItemLabel:y.Z,QExpansionItem:v.Z});var D=n(644),W=n(3617);const I=[{title:"Dashboard",caption:"",icon:"space_dashboard",link:"#"},{title:"DTC",caption:"read/erase DTC codes",icon:"memory",link:"#dtc"},{title:"Ignition",caption:"",icon:"settings_input_component",innerItems:[{title:"Tables",caption:"configure ignition tables",link:"#ignition/tables"},{title:"Configuration",caption:"(Dwell time, ignition, cold advance)",link:"#dtc"}]},{title:"Injection",caption:"",icon:"mdi-needle",innerItems:[{title:"Tables",caption:"(AFR, Fuel VE, FuelPump)",link:"#ignition/tables"},{title:"Configuration",caption:"(Calculations, DeadTime|PWM, FuelCutout)",link:"#dtc"},{title:"Advanced Configuration",caption:"(dual fuel, NoS, Water/Meth injection)",link:"#dtc"}]},{title:"Startup / IDLE",caption:"",icon:"mdi-car-speed-limiter",innerItems:[{title:"Warnup Enrichment (WUE)",link:"#"},{title:"Afterstart Enrichment (ASE)",link:"#"},{title:"IDLE Advance / VE | IDLE Control",link:"#"}]},{title:"Settings",caption:"system settings",icon:"settings",link:"https://chat.quasar.dev",innerItems:[{title:"Sensors",link:"#"},{title:"I/O Mapping",link:"#"},{title:"Rev Limiter / ShiftLigth",link:"#"},{title:"General Settings",link:"#",caption:"(tacho output, fan control, relay control)"}]},{title:"Firmware",caption:"(rebuild, update, factory reset)",icon:"mdi-usb-flash-drive",link:"https://chat.quasar.dev"}],U=(0,a.aZ)({name:"NavBar",components:{EssentialLink:Z},setup(){const e=(0,W.oR)(D.storeKey);return{essentialLinks:I,toggleLeftDrawer(){e.dispatch("Layout/toogleMenu")}}}});var C=n(2901),Q=n(7704),E=n(7011);const S=(0,k.Z)(U,[["render",p]]),j=S;L()(U,"components",{QDrawer:C.Z,QScrollArea:Q.Z,QList:E.Z,QItemLabel:y.Z});const T={class:"q-mr-lg q-ml-xl"},$=(0,a.Uk)(" Connect ");function x(e,t,n,i,o,r){const l=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",T,[(0,a.Wm)(l,{color:"primary",onClick:e.connectUsbDevice,disable:e.store.state.UsbLayer.paired},{default:(0,a.w5)((()=>[$])),_:1},8,["onClick","disable"])])}var M=function(e,t,n,a){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function r(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):i(e.value).then(r,l)}s((a=a.apply(e,t||[])).next())}))};let A=[],F=null;const P=(0,a.aZ)({name:"Connect",methods:{connectUsbDevice(){const e=4617;navigator.serial.requestPort({filters:[{usbVendorId:e}]}).then((e=>{this.store.dispatch("UsbLayer/initConnection",!0),this.startWorking(e)})).catch((e=>{this.store.dispatch("UsbLayer/initConnection",!1)}))},startWorking(e){return M(this,void 0,void 0,(function*(){if(yield e.open({baudRate:512e3}),!e.writable)return;const t=e.writable.getWriter();this.store.dispatch("UsbLayer/setWriter",t),this.store.dispatch("UsbLayer/sendMessage",{command:1,payload:[255]});const n=()=>{const e=this.store.getters["UsbLayer/getCommand"](12);e&&(clearInterval(F),this.store.dispatch("UsbLayer/connected",e.payload),this.store.dispatch("UsbLayer/removeCommand",e))};this.intConnection=setInterval(n,50);while(e.readable){const t=e.readable.getReader();try{while(1){const{value:e,done:n}=yield t.read();if(n)break;if(!e)return;if(A=[...A,...e],A.length>127){let e,t,n;const a=128;let i=0;for(e=0,t=A.length;e<t;e+=a)n=A.slice(e,e+a),n.length>127&&(this.store.dispatch("UsbLayer/recv",n),i++);A=[...A.slice(128*i)]}}}catch(a){}finally{t.releaseLock()}}}))}},setup(){const e=(0,W.oR)(D.storeKey);return{store:e,intConnection:F}}});var R=n(5380);const z=(0,k.Z)(P,[["render",x]]),H=z;L()(P,"components",{QBtn:R.Z});var B=n(8825),K=n(1959);const V=(0,a.aZ)({name:"Menu",components:{NavBar:j,Connect:H},setup(){const e=(0,K.iH)(!1),t=(0,W.oR)(D.storeKey),n=(0,B.Z)();return{q:n,leftDrawerOpen:e,toggleLeftDrawer(){t.dispatch("Layout/toogleMenu")}}}});var N=n(9214),O=n(3812),G=n(9570),Y=n(3747),J=n(2025),X=n(4904),ee=n(1598),te=n(2652),ne=n(4379);const ae=(0,k.Z)(V,[["render",d]]),ie=ae;L()(V,"components",{QLayout:N.Z,QHeader:O.Z,QToolbar:G.Z,QBtn:R.Z,QToolbarTitle:Y.Z,QSpace:J.Z,QToggle:X.Z,QLinearProgress:ee.Z,QPageContainer:te.Z,QPage:ne.Z})}}]);