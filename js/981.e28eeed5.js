"use strict";(self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[]).push([[981],{7981:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(3673);const o=(0,n._)("h4",{class:"q-mt-md q-mb-md"},"Ignition Tables",-1),r=(0,n._)("h6",{class:"q-mt-md q-mb-lg"},"you can view and edit ignition tables from here",-1),l={class:"row q-pa-lg q-gutter-lg",style:{width:"100%"}},i=(0,n.Uk)(" Read table from file "),s=(0,n.Uk)(" Save table to file "),d=(0,n._)("span",{class:"q-mr-md"},"get table info from EFI",-1),c=(0,n.Uk)(" write tables to EFI "),u=(0,n.Uk)(" write tables to EFI "),m=(0,n._)("div",{class:"text-h6 q-mb-md"},"RPM/Load (Kpa)",-1),p=(0,n._)("div",{class:"text-h6"},"Load/Temp",-1),f=(0,n.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. "),b=(0,n._)("div",{class:"text-h6"},"RPM/Battery",-1),g=(0,n.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ");function _(e,t,a,_,y,h){const w=(0,n.up)("q-btn"),q=(0,n.up)("q-linear-progress"),v=(0,n.up)("q-tab"),k=(0,n.up)("q-tabs"),T=(0,n.up)("q-separator"),P=(0,n.up)("canvas-datagrid"),I=(0,n.up)("NotTableData"),x=(0,n.up)("q-tab-panel"),W=(0,n.up)("q-tab-panels"),S=(0,n.up)("q-card");return(0,n.wg)(),(0,n.iD)("div",null,[o,r,(0,n._)("div",l,[(0,n.Wm)(w,{icon:"folder_open",color:"secondary",class:"gt-xs",outline:""},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(w,{icon:"save",color:"secondary",class:"gt-xs",outline:""},{default:(0,n.w5)((()=>[s])),_:1}),(0,n.Wm)(w,{icon:"download",color:"primary",onClick:e.requestTable},{default:(0,n.w5)((()=>[d])),_:1},8,["onClick"]),(0,n.Wm)(w,{icon:"file_upload",color:"secondary",class:"gt-xs",onClick:e.pathTable,disable:!e.paired},{default:(0,n.w5)((()=>[c])),_:1},8,["onClick","disable"]),(0,n.Wm)(w,{icon:"file_upload",color:"secondary",class:"xs q-mt-md",onClick:e.pathTable,disable:!e.paired},{default:(0,n.w5)((()=>[u])),_:1},8,["onClick","disable"])]),e.$store.state.Ignition.tables_loading?((0,n.wg)(),(0,n.j4)(q,{key:0,class:"q-mb-lg q-mt-md",indeterminate:"",rounded:"",size:"15px","animation-speed":"600"})):(0,n.kq)("",!0),(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{name:"rpmload",label:"RPM/Load"}),(0,n.Wm)(v,{name:"loadtemp",label:"Temp/Load"}),(0,n.Wm)(v,{name:"rpmbattery",label:"RPM/Battery",disable:""})])),_:1},8,["modelValue"]),(0,n.Wm)(T),(0,n.Wm)(W,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{name:"rpmload"},{default:(0,n.w5)((()=>[m,null!==e.tables.rpm_load?((0,n.wg)(),(0,n.j4)(P,{key:0,".data":e.tables.rpm_load,showRowHeaders:"false",showColumnHeaders:"false",class:"ignition_table"},null,8,[".data"])):(0,n.kq)("",!0),null===e.tables.rpm_load?((0,n.wg)(),(0,n.j4)(I,{key:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(x,{name:"loadtemp"},{default:(0,n.w5)((()=>[p,f,null===e.tables.rpm_load?((0,n.wg)(),(0,n.j4)(I,{key:0})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(x,{name:"rpmbattery"},{default:(0,n.w5)((()=>[b,g,null===e.tables.rpm_load?((0,n.wg)(),(0,n.j4)(I,{key:0})):(0,n.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}var y=a(1959);const h={ignition_rpm_load:{5:"#536dfe",10:"#448aff",14:"#00b0ff",23:"#ff0",27:"#ffca28",30:"#ffc107",33:"#ff9100",36:"#ef5350"}};let w=h.ignition_rpm_load;const q=e=>{const t=e;if(!(Number(t.cell.boundRowIndex)<1||Number(t.cell.boundColumnIndex)<1))for(const a in w){const e=w[a];Number(t.cell.value)>=Number(a)&&(t.ctx.fillStyle=e)}},v=(e,t,a,n)=>{const o=document.querySelector(`.${n}`);if(o){const e=o,{width:n}=e.getBoundingClientRect();e.style.cellWidth=80,e.style.cellWidth=n/a>60?n/a-.15:60,e.style.width="100%",t.disconnect(),o.addEventListener("rendercell",q)}},k=(e,t)=>{const a=document.querySelector(`.${t}`);if(a)v({},{disconnect:()=>{}},e,t);else{const a=new MutationObserver(((a,n)=>v(a,n,e,t))),n=document.body;a.observe(n,{childList:!0,subtree:!0})}},T=e=>{const t=document.querySelector(`.${e}`);null===t||void 0===t||t.removeEventListener("rendercell",q)};var P=a(644),I=a(3617);function x(){var e,t,a,n;function o(e,t){var r;if(isNaN(e)&&isNaN(t)&&"number"===typeof e&&"number"===typeof t)return!0;if(e===t)return!0;if("function"===typeof e&&"function"===typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(a.indexOf(e)>-1||n.indexOf(t)>-1)return!1;for(r in t){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(typeof t[r]!==typeof e[r])return!1}for(r in e){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(typeof t[r]!==typeof e[r])return!1;switch(typeof e[r]){case"object":case"function":if(a.push(e),n.push(t),!o(e[r],t[r]))return!1;a.pop(),n.pop();break;default:if(e[r]!==t[r])return!1;break}}return!0}if(arguments.length<1)return!0;for(e=1,t=arguments.length;e<t;e++)if(a=[],n=[],!o(arguments[0],arguments[e]))return!1;return!0}const W={class:"column items-center"},S=(0,n._)("h4",{class:"q-mb-xs"},"No table data available",-1),R=(0,n._)("h5",{class:"q-mt-md"},"Load a file or sync from the ECU",-1);function U(e,t,a,o,r,l){const i=(0,n.up)("q-icon");return(0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(i,{name:"report_gmailerrorred",size:"120px"}),S,R])}const C={data:()=>({}),methods:{}};var N=a(4260),L=a(4554),O=a(7518),Z=a.n(O);const j=(0,N.Z)(C,[["render",U]]),Q=j;Z()(C,"components",{QIcon:L.Z});let M=null;const E=(0,n.aZ)({name:"Ignition",components:{NotTableData:Q},mounted(){k(17,"ignition_table")},beforeUnmount(){T("ignition_table")},methods:{requestTable(){if(!this.paired)return;this.store.dispatch("Ignition/requestIgnitionTableRPMTPS");const e=()=>{const e=this.store.getters["UsbLayer/getCommand"](127);e&&(console.log("table available"),clearInterval(M),this.store.dispatch("Ignition/getIgnitionTableRPMTPS"))};this.intTable=setInterval(e,250)},pathTable(){this.paired&&this.store.dispatch("Ignition/uploadTableRPMTPS",this.tables.rpm_load)}},setup(){const e=(0,y.iH)("rpmload"),t=(0,I.oR)(P.storeKey),a=t.state.Ignition.tables;let o={rpm_load:!1};const r=e=>JSON.parse(JSON.stringify(e)),l=(0,y.qj)({rpm_load:r(a.rpm_load)}),i=(0,n.Fl)((()=>t.getters["UsbLayer/getCommand"](125))),s=t.state.UsbLayer.paired;return(0,n.m0)((()=>{e.value&&(T("ignition_table"),k(17,"ignition_table"))})),(0,n.m0)((()=>{l.rpm_load=r(a.rpm_load)})),(0,n.m0)((()=>{i.value&&t.dispatch("Ignition/checkUploadResult",i.value)})),(0,n.YP)(l,(e=>{if(x(l.rpm_load,(0,y.IU)(e).rpm_load)){if(!o.rpm_load)return void(o.rpm_load=!0);console.log("table have changed",(0,y.IU)(e)),t.dispatch("Ignition/updateTableRPMTPS",e.rpm_load),o.rpm_load=!1}}),{deep:!0}),{tab:e,store:t,tables:l,intTable:M,paired:s}}});var D=a(5380),V=a(3282),B=a(1598),F=a(151),H=a(2496),$=a(3269),z=a(5869),J=a(5906),K=a(6602);const Y=(0,N.Z)(E,[["render",_]]),A=Y;Z()(E,"components",{QBtn:D.Z,QSpinnerHourglass:V.Z,QLinearProgress:B.Z,QCard:F.Z,QTabs:H.Z,QTab:$.Z,QSeparator:z.Z,QTabPanels:J.Z,QTabPanel:K.Z})}}]);