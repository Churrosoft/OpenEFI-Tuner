(()=>{"use strict";var e={3912:(e,n,o)=>{var t=o(8880),r=(o(71),o(1659)),a=o(3673);function i(e,n,o,t,r,i){const s=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(s)}const s=(0,a.aZ)({name:"App"});var c=o(4260);const d=(0,c.Z)(s,[["render",i]]),l=d;var u=o(2156),m=o(7083),p=o(9582);const f=[{path:"/",component:()=>Promise.all([o.e(736),o.e(64),o.e(918)]).then(o.bind(o,1918)),children:[{path:"",component:()=>Promise.all([o.e(736),o.e(559)]).then(o.bind(o,5559))}]},{path:"/ignition",component:()=>Promise.all([o.e(736),o.e(64),o.e(249)]).then(o.bind(o,1249)),children:[{path:"tables",component:()=>Promise.all([o.e(736),o.e(208)]).then(o.bind(o,7208))},{path:"config",component:()=>Promise.all([o.e(736),o.e(57)]).then(o.bind(o,2057))}]},{path:"/dtc",component:()=>Promise.all([o.e(736),o.e(64),o.e(918)]).then(o.bind(o,1918)),children:[{path:"",component:()=>Promise.all([o.e(736),o.e(910)]).then(o.bind(o,5910))},{path:"config",component:()=>Promise.all([o.e(736),o.e(52)]).then(o.bind(o,4052))}]},{path:"/:catchAll(.*)*",component:()=>Promise.all([o.e(736),o.e(293)]).then(o.bind(o,7293))}],g=f,h=(0,m.BC)((function(){const e=p.r5,n=(0,p.p7)({scrollBehavior:()=>({left:0,top:0}),routes:g,history:e("")});return n}));async function v(e,n){const t="function"===typeof u["default"]?await(0,u["default"])({}):u["default"],{storeKey:a}=await Promise.resolve().then(o.bind(o,2156)),i="function"===typeof h?await h({store:t}):h;t.$router=i;const s=e(l);return s.use(r.Z,n),{app:s,store:t,storeKey:a,router:i}}const b={config:{}};async function y({app:e,router:n,store:o,storeKey:t}){e.use(n),e.use(o,t),e.mount("#q-app")}v(t.ri,b).then(y)},8643:(e,n,o)=>{o.d(n,{C:()=>a,Z:()=>i});o(979),o(6105),o(5123),o(2396);const t=e=>65535&e,r=e=>{let n=65535,o=0;return e.map((e=>{o=t(n>>8^e),o^=t(o>>4),n=t(n<<8^o<<12^o<<5^o)})),n};function a(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}const i=r},2156:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Y,storeKey:()=>X,useStore:()=>ee});var t=o(7083),r=o(3617);const a=(e,n,o)=>{const t=1;return{protocol:t,command:e,payload:n,checksum:o}};function i(){return{toogle_menu:!1,usbd:null,writer:null,connected:!1,paired:!1,firmware_ver:{major:null,minor:null,rev:null},pending_commands:null}}const s=i;var c=o(8643);const d={connected({commit:e,dispatch:n},o){e("setConnection",{usbd:o}),n("sendMessage",{command:10,subcommand:0})},sendMessage({state:e},{command:n,payload:o}){let t=Array(128).fill(0);t=[1,n>>8&255,255&n,...o].slice(0,128);const r=(0,c.Z)(t.slice(0,126));t[126]=r>>8&255,t[127]=255&r;const a=new Uint8Array(t);console.debug(`Frame enviado\nProtocolo: 1\nComando: ${n}\nPayload: ${o}\nChecksum: ${r}`),console.debug(a),e.writer.write(a)},removeCommand({state:e,commit:n},o){var t;if(!o)return;const r=null===(t=e.pending_commands)||void 0===t?void 0:t.filter((e=>e.checksum!==o.checksum));n("setCommands",r)},recv({commit:e},n){const o=new Uint8Array(n),t=o[0],r=(o[1]<<8)+o[2],i=o.slice(3,126),s=(0,c.C)(o.slice(126,128).buffer),d=("0000"+(0,c.Z)(o.slice(0,126)).toString(16)).substr(-4),l=a(r,i,d);console.debug("Frame recibido\nProtocolo: "+t+"\nComando: "+r+"\nPayload: "+i+"\nChecksum: "+s),s!=d?console.warn("Checksums no coinciden! \nLocal: "+d+"\nEFI: "+s):e("addCommand",l)},setWriter({commit:e},n){e("setConnection",n)},putCommand({commit:e},n){e("addCommand",n)},someAction(){}},l=d,u={someAction(){},getCommand:e=>n=>{const o=String(n).slice(1,3);if(e.pending_commands){let n=null;return e.pending_commands.map((e=>{String(e.command)===o&&null===n&&(n=e)})),n}return null}},m=u,p={setConnection(e,n){e.writer=n,e.connected=!0},setDisconnected(e){e.connected=!1,e.paired=!1},setPaired(e,{major:n,minor:o,rev:t}){e.firmware_ver={major:n,minor:o,rev:t},e.paired=!0},setCommands(e,n){e.pending_commands=n},addCommand(e,n){e.pending_commands?e.pending_commands=[...e.pending_commands,n]:e.pending_commands=[n]},toogle_menu(e,n){e.toogle_menu=n}},f=p,g={namespaced:!0,actions:l,getters:m,mutations:f,state:s},h=g;function v(){return{efiCodes:null,parsedCodes:null,parsedLoading:!1,efiLoading:!1}}const b=v;var y=function(e,n,o,t){function r(e){return e instanceof o?e:new o((function(n){n(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{c(t.next(e))}catch(n){a(n)}}function s(e){try{c(t["throw"](e))}catch(n){a(n)}}function c(e){e.done?o(e.value):r(e.value).then(i,s)}c((t=t.apply(e,n||[])).next())}))};function C(e){return new Promise((n=>setTimeout(n,e)))}function P(e){let n="";const o=new Uint8Array(e),t=o.byteLength;for(let r=0;r<t;r++)n+=String.fromCharCode(o[r]);return window.atob(n)}const w={getDTCfromEFI({commit:e,rootGetters:n,dispatch:o,rootState:t}){var r;return y(this,void 0,void 0,(function*(){const a=[];e("setParsedLoading",!0),e("clearParsedCodes");const i=null===(r=t.UsbLayer.pending_commands)||void 0===r?void 0:r.length;if(i){for(let e=0;e<i;e++){const e=n["UsbLayer/getCommand"](130);if(null!==e){const n=e.payload.slice(0,8);a.push(P(n)),o("UsbLayer/removeCommand",e,{root:!0})}}for(let n=0;n<a.length;n++){const o=a[n];yield C(150);const t=o.slice(0,3).toLowerCase(),r=yield fetch(`https://cdn.jsdelivr.net/gh/openefi/dtc_codes@main/mocks/${t}/${o.toLowerCase()}.json`),i=yield r.json();e("appedParsedCode",i)}e("setParsedLoading",!1)}}))},someAction(){}},_=w,L={someAction(){}},T=L,A={appedEFICode(e,n){null===e.efiCodes?e.efiCodes=[n]:e.efiCodes.push(n)},appedParsedCode(e,n){null===e.parsedCodes?e.parsedCodes=[n]:e.parsedCodes.push(n)},clearEFICodes(e){e.efiCodes=null},clearParsedCodes(e){e.parsedCodes=null},setEfiLoading(e,n){e.efiLoading=n},setParsedLoading(e,n){e.efiLoading=n}},S=A,k={namespaced:!0,actions:_,getters:T,mutations:S,state:b},j=k;function M(){return{toogleMenu:!1}}const O=M,U={toogleMenu({commit:e,state:n}){e("toogleMenu",!n.toogleMenu)},someAction(){}},E=U,I={someAction(){}},x=I,F={toogleMenu(e,n){e.toogleMenu=n}},R=F,$={namespaced:!0,actions:E,getters:x,mutations:R,state:O},Z=$;function D(){return{tables_loading:!1,tables:{rpm_load:null}}}const q=D;var K=function(e,n,o,t){function r(e){return e instanceof o?e:new o((function(n){n(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{c(t.next(e))}catch(n){a(n)}}function s(e){try{c(t["throw"](e))}catch(n){a(n)}}function c(e){e.done?o(e.value):r(e.value).then(i,s)}c((t=t.apply(e,n||[])).next())}))};function B(e){return new Promise((n=>setTimeout(n,e)))}const G={requestIgnitionTableRPMTPS({commit:e,rootGetters:n,dispatch:o}){e("setIgnitionLoading",!0);const t=21,r=10,a=Array(123).fill(0);a[0]=r>>8&255,a[1]=255&r,o("UsbLayer/sendMessage",{command:t,payload:a},{root:!0}),console.log("TODO: request table to EFI")},getIgnitionTableRPMTPS({commit:e,rootGetters:n,dispatch:o,rootState:t}){var r;return K(this,void 0,void 0,(function*(){const a=[],i=n["UsbLayer/getCommand"](127);o("UsbLayer/removeCommand",i,{root:!0});const s=null===(r=t.UsbLayer.pending_commands)||void 0===r?void 0:r.length;if(s){for(let e=0;e<s;e++){const e=n["UsbLayer/getCommand"](126);if(null!==e){if(!(null===e||void 0===e?void 0:e.payload))return;const n={};for(let o=0;o<(null===e||void 0===e?void 0:e.payload.length);o+=4){const t=null===e||void 0===e?void 0:e.payload,r=new Uint8Array(4);r[0]=t[o],r[1]=t[o+1],r[2]=t[o+2],r[3]=t[o+3];const a=new DataView(r.buffer,0);n[`col_${o}`]=String(a.getUint32(0,!0)/100)}a.push(n),yield B(10),o("UsbLayer/removeCommand",e,{root:!0})}}console.log(a),console.log(a.length),a.length>1&&e("setTableRPM_TPS",a),e("setIgnitionLoading",!1)}}))},updateTableRPMTPS({commit:e},n){console.log("updating",n),e("setTableRPM_TPS",n)},someAction(){}},N=G,V={someAction(){}},W=V,z={setTableRPM_TPS(e,n){e.tables.rpm_load=n},clearTableRPM_TPS(e){e.tables.rpm_load=null},setIgnitionLoading(e,n){e.tables_loading=n}},H=z,J={namespaced:!0,actions:N,getters:W,mutations:H,state:q},Q=J,X=Symbol("vuex-key"),Y=(0,t.h)((function(){const e=(0,r.MT)({modules:{UsbLayer:h,Layout:Z,DtcCodes:j,Ignition:Q},strict:!1});return e}));function ee(){return(0,r.oR)(X)}}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,o),a.exports}o.m=e,(()=>{var e=[];o.O=(n,t,r,a)=>{if(!t){var i=1/0;for(l=0;l<e.length;l++){for(var[t,r,a]=e[l],s=!0,c=0;c<t.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(l--,1);var d=r();void 0!==d&&(n=d)}}return n}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[t,r,a]}})(),(()=>{o.n=e=>{var n=e&&e.__esModule?()=>e["default"]:()=>e;return o.d(n,{a:n}),n}})(),(()=>{o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}})(),(()=>{o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((n,t)=>(o.f[t](e,n),n)),[]))})(),(()=>{o.u=e=>"js/"+(64===e?"chunk-common":e)+"."+{52:"276295f4",57:"0261e91f",64:"131f9b33",208:"aed4e77c",249:"9c46f005",293:"a89287b5",559:"a6588b51",910:"8a74c115",918:"df14ca95"}[e]+".js"})(),(()=>{o.miniCssF=e=>"css/"+{143:"app",736:"vendor"}[e]+"."+{143:"31d6cfe0",736:"c2164508"}[e]+".css"})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{var e={},n="openefi-tuner:";o.l=(t,r,a,i)=>{if(e[t])e[t].push(r);else{var s,c;if(void 0!==a)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==n+a){s=u;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",n+a),s.src=t),e[t]=[r];var m=(n,o)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(o))),n)return n(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),(()=>{o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{o.p=""})(),(()=>{var e={143:0};o.f.j=(n,t)=>{var r=o.o(e,n)?e[n]:void 0;if(0!==r)if(r)t.push(r[2]);else{var a=new Promise(((o,t)=>r=e[n]=[o,t]));t.push(r[2]=a);var i=o.p+o.u(n),s=new Error,c=t=>{if(o.o(e,n)&&(r=e[n],0!==r&&(e[n]=void 0),r)){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;s.message="Loading chunk "+n+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,r[1](s)}};o.l(i,c,"chunk-"+n,n)}},o.O.j=n=>0===e[n];var n=(n,t)=>{var r,a,[i,s,c]=t,d=0;if(i.some((n=>0!==e[n]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var l=c(o)}for(n&&n(t);d<i.length;d++)a=i[d],o.o(e,a)&&e[a]&&e[a][0](),e[i[d]]=0;return o.O(l)},t=self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var t=o.O(void 0,[736],(()=>o(3912)));t=o.O(t)})();