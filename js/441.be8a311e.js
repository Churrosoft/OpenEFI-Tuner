"use strict";(self["webpackChunkopenefi_tuner"]=self["webpackChunkopenefi_tuner"]||[]).push([[441],{6441:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var a=n(3673);const o=(0,a._)("h4",{class:"q-mt-md q-mb-md"},"Ignition Tables",-1),r=(0,a._)("h6",{class:"q-mt-md q-mb-lg"},"you can view and edit ignition tables from here",-1),l={class:"row q-pa-lg",style:{width:"100%"}},i=(0,a._)("span",{class:"q-mr-md"},null,-1),s=(0,a.Uk)("get table info from EFI "),d=(0,a._)("span",{class:"col-2 gt-xs"},null,-1),c=(0,a._)("span",{class:"q-mr-md"},null,-1),u=(0,a.Uk)("write tables to EFI "),m=(0,a._)("span",{class:"q-mr-md"},null,-1),p=(0,a.Uk)("write tables to EFI "),f=(0,a._)("div",{class:"text-h6 q-mb-md"},"RPM/Load (Kpa)",-1),b=(0,a._)("div",{class:"text-h6"},"Load/Temp",-1),g=(0,a.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. "),_=(0,a._)("div",{class:"text-h6"},"RPM/Battery",-1),h=(0,a.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ");function y(e,t,n,y,w,q){const v=(0,a.up)("q-btn"),k=(0,a.up)("q-linear-progress"),P=(0,a.up)("q-tab"),T=(0,a.up)("q-tabs"),I=(0,a.up)("q-separator"),x=(0,a.up)("canvas-datagrid"),R=(0,a.up)("q-tab-panel"),S=(0,a.up)("q-tab-panels"),W=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",null,[o,r,(0,a._)("div",l,[(0,a.Wm)(v,{flat:"",icon:"download",color:"primary",onClick:e.requestTable,rounded:""},{default:(0,a.w5)((()=>[i,s])),_:1},8,["onClick"]),d,(0,a.Wm)(v,{icon:"file_upload",color:"secondary",class:"gt-xs",rounded:"",onClick:e.pathTable},{default:(0,a.w5)((()=>[c,u])),_:1},8,["onClick"]),(0,a.Wm)(v,{icon:"file_upload",color:"secondary",class:"xs q-mt-md",rounded:"",onClick:e.pathTable},{default:(0,a.w5)((()=>[m,p])),_:1},8,["onClick"])]),e.$store.state.Ignition.tables_loading?((0,a.wg)(),(0,a.j4)(k,{key:0,class:"q-mb-lg q-mt-md",indeterminate:"",rounded:"",size:"15px","animation-speed":"600"})):(0,a.kq)("",!0),(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{name:"rpmload",label:"RPM/Load"}),(0,a.Wm)(P,{name:"loadtemp",label:"Temp/Load"}),(0,a.Wm)(P,{name:"rpmbattery",label:"RPM/Battery",disable:""})])),_:1},8,["modelValue"]),(0,a.Wm)(I),(0,a.Wm)(S,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{name:"rpmload"},{default:(0,a.w5)((()=>[f,null!==e.tables.rpm_load?((0,a.wg)(),(0,a.j4)(x,{key:0,".data":e.tables.rpm_load,showRowHeaders:"false",showColumnHeaders:"false",class:"ignition_table"},null,8,[".data"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(R,{name:"loadtemp"},{default:(0,a.w5)((()=>[b,g])),_:1}),(0,a.Wm)(R,{name:"rpmbattery"},{default:(0,a.w5)((()=>[_,h])),_:1})])),_:1},8,["modelValue"])])),_:1})])}var w=n(1959);const q={ignition_rpm_load:{5:"#536dfe",10:"#448aff",14:"#00b0ff",23:"#ff0",27:"#ffca28",30:"#ffc107",33:"#ff9100",36:"#ef5350"}};let v=q.ignition_rpm_load;const k=e=>{const t=e;if(!(Number(t.cell.boundRowIndex)<1||Number(t.cell.boundColumnIndex)<1))for(const n in v){const e=v[n];Number(t.cell.value)>=Number(n)&&(t.ctx.fillStyle=e)}},P=(e,t,n,a)=>{const o=document.querySelector(`.${a}`);if(o){const e=o,{width:a}=e.getBoundingClientRect();e.style.cellWidth=80,e.style.cellWidth=a/n>60?a/n-.15:60,e.style.width="100%",t.disconnect(),o.addEventListener("rendercell",k)}},T=(e,t)=>{const n=document.querySelector(`.${t}`);if(n)P({},{disconnect:()=>{}},e,t);else{const n=new MutationObserver(((n,a)=>P(n,a,e,t))),a=document.body;n.observe(a,{childList:!0,subtree:!0})}},I=e=>{const t=document.querySelector(`.${e}`);null===t||void 0===t||t.removeEventListener("rendercell",k)};var x=n(644),R=n(3617);function S(){var e,t,n,a;function o(e,t){var r;if(isNaN(e)&&isNaN(t)&&"number"===typeof e&&"number"===typeof t)return!0;if(e===t)return!0;if("function"===typeof e&&"function"===typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(n.indexOf(e)>-1||a.indexOf(t)>-1)return!1;for(r in t){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(typeof t[r]!==typeof e[r])return!1}for(r in e){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(typeof t[r]!==typeof e[r])return!1;switch(typeof e[r]){case"object":case"function":if(n.push(e),a.push(t),!o(e[r],t[r]))return!1;n.pop(),a.pop();break;default:if(e[r]!==t[r])return!1;break}}return!0}if(arguments.length<1)return!0;for(e=1,t=arguments.length;e<t;e++)if(n=[],a=[],!o(arguments[0],arguments[e]))return!1;return!0}let W=null;const C=(0,a.aZ)({name:"Ignition",components:{},mounted(){T(17,"ignition_table")},beforeUnmount(){I("ignition_table")},methods:{requestTable(){this.store.dispatch("Ignition/requestIgnitionTableRPMTPS");const e=()=>{const e=this.store.getters["UsbLayer/getCommand"](127);e&&(console.log("table available"),clearInterval(W),this.store.dispatch("Ignition/getIgnitionTableRPMTPS"))};this.intTable=setInterval(e,250)},pathTable(){this.store.dispatch("Ignition/uploadTableRPMTPS",this.tables.rpm_load)}},setup(){const e=(0,w.iH)("rpmload"),t=(0,R.oR)(x.storeKey),n=t.state.Ignition.tables;let o={rpm_load:!1};const r=e=>JSON.parse(JSON.stringify(e)),l=(0,w.qj)({rpm_load:r(n.rpm_load)}),i=(0,a.Fl)((()=>t.getters["UsbLayer/getCommand"](125)));return(0,a.m0)((()=>{e.value&&(I("ignition_table"),T(17,"ignition_table"))})),(0,a.m0)((()=>{l.rpm_load=r(n.rpm_load)})),(0,a.m0)((()=>{i.value&&t.dispatch("Ignition/checkUploadResult",i.value)})),(0,a.YP)(l,(e=>{if(S(l.rpm_load,(0,w.IU)(e).rpm_load)){if(!o.rpm_load)return void(o.rpm_load=!0);console.log("table have changed",(0,w.IU)(e)),t.dispatch("Ignition/updateTableRPMTPS",e.rpm_load),o.rpm_load=!1}}),{deep:!0}),{tab:e,store:t,tables:l,intTable:W}}});var O=n(4260),U=n(9400),L=n(1598),N=n(151),Z=n(2496),M=n(3269),Q=n(5869),j=n(5906),E=n(6602),V=n(7518),B=n.n(V);const F=(0,O.Z)(C,[["render",y]]),$=F;B()(C,"components",{QBtn:U.Z,QLinearProgress:L.Z,QCard:N.Z,QTabs:Z.Z,QTab:M.Z,QSeparator:Q.Z,QTabPanels:j.Z,QTabPanel:E.Z})}}]);