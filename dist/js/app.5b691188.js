(function(e){function n(n){for(var r,i,c=n[0],s=n[1],u=n[2],l=0,m=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(n);while(m.length)m.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,i=1;i<t.length;i++){var s=t[i];0!==o[s]&&(r=!1)}r&&(a.splice(n--,1),e=c(c.s=t[0]))}return e}var r={},o={app:0},a=[];function i(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"51b537ef"}[e]+".js"}function c(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var r=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=i(e);var u=new Error;a=function(n){s.onerror=s.onload=null,clearTimeout(l);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",u.name="ChunkLoadError",u.type=r,u.request=a,t[1](u)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(n)},c.m=e,c.c=r,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)c.d(t,r,function(n){return e[n]}.bind(null,r));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="/",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var d=u;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("Header")],1)],1),t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("Menu")],1)],1)],1),t("v-content",[t("router-view")],1),t("v-footer",{attrs:{app:""}},[t("span",[t("a",{attrs:{href:"https://github.com/openefi/",target:"new"}},[e._v(" Â© OpenEFI 2020")])])])],1)},a=[],i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app-bar",{attrs:{app:"",color:"primary",dark:"","clipped-left":""}},[t("v-app-bar-nav-icon",{on:{click:function(n){n.stopPropagation(),e.Drawer=!e.Drawer}}}),t("v-toolbar-title",[e._v("OpenEFI Tuner")]),t("v-spacer"),e.$store.state.paired?t("div",[e._v(" Firmware v "),t("span",{domProps:{innerHTML:e._s(e.$store.state.firmware_ver.major+"."+e.$store.state.firmware_ver.minor+"."+e.$store.state.firmware_ver.rev)}})]):t("div",[e._v("Esperando terminal...")])],1)},c=[],s={name:"Header",components:{},data:function(){return{}},computed:{Drawer:{get:function(){return this.$store.getters.toogle_menu},set:function(e){return this.$store.commit("toogle_menu",e)}},mini:function(){return this.$vuetify.breakpoint.mdAndDown}}},u=s,l=t("2877"),d=t("6544"),m=t.n(d),f=t("40dc"),p=t("5bc1"),v=t("2fa4"),b=t("2a7f"),h=Object(l["a"])(u,i,c,!1,null,null,null),g=h.exports;m()(h,{VAppBar:f["a"],VAppBarNavIcon:p["a"],VSpacer:v["a"],VToolbarTitle:b["a"]});var w=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-navigation-drawer",{attrs:{app:"",clipped:"","mini-variant":e.mini},model:{value:e.Drawer,callback:function(n){e.Drawer=n},expression:"Drawer"}},[t("v-list",{attrs:{dense:""}},e._l(e.items,(function(n,r){return t("v-list-item",{key:r,attrs:{to:n.link,link:""}},[t("v-list-item-action",[t("v-icon",[e._v(e._s(n.icon))])],1),t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(n.title))])],1)],1)})),1)],1)},_=[],y=t("94ed"),O={name:"Menu",data:function(){return{drawer:null,items:[{title:"Dashboard",icon:"mdi-view-dashboard",link:"/"},{title:"DTC",icon:y["a"],link:"/dtc"},{title:"Settings",icon:y["b"],link:"/settings"},{title:"About",icon:"mdi-help-box",link:"/about"}]}},computed:{Drawer:{get:function(){return!!this.$vuetify.breakpoint.smAndUp||this.$store.getters.toogle_menu},set:function(e){return this.$store.commit("toogle_menu",e)}},mini:function(){return this.$vuetify.breakpoint.smAndUp&&this.$store.getters.toogle_menu}}},k=O,C=t("132d"),A=t("8860"),$=t("da13"),j=t("1800"),V=t("5d23"),D=t("f774"),E=Object(l["a"])(k,w,_,!1,null,null,null),I=E.exports;m()(E,{VIcon:C["a"],VList:A["a"],VListItem:$["a"],VListItemAction:j["a"],VListItemContent:V["a"],VListItemTitle:V["b"],VNavigationDrawer:D["a"]});var x={name:"App",components:{Header:g,Menu:I},data:function(){return{}}},S=x,P=t("7496"),F=t("62ad"),T=t("a523"),L=t("a75b"),M=t("553a"),R=t("0fd9"),N=Object(l["a"])(S,o,a,!1,null,null,null),U=N.exports;m()(N,{VApp:P["a"],VCol:F["a"],VContainer:T["a"],VContent:L["a"],VFooter:M["a"],VRow:R["a"]});var B=t("9483");Object(B["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});t("d3b7");var H=t("8c4f"),q=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",[e.$store.state.connected?e.$store.state.paired?t("div",[e._v(" Conectado. Firmware v"),t("span",{domProps:{innerHTML:e._s(e.$store.state.firmware_ver.major+"."+e.$store.state.firmware_ver.minor+"."+e.$store.state.firmware_ver.rev)}}),t("v-btn",{attrs:{color:"red"},on:{click:e.bootload}},[e._v("Reset to bootloader")])],1):t("div",[e._v("Esperando terminal...")]):t("connect")],1)},J=[],G=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",[t("v-row",{staticClass:"text-center"},[t("v-col",{attrs:{cols:"4"}},[t("v-btn",{attrs:{color:"primary"},on:{click:e.connectUsbDevice}},[e._v("Conectar")])],1)],1)],1)},K=[],z=(t("96cf"),t("1da1"));function Q(e){return W.apply(this,arguments)}function W(){return W=Object(z["a"])(regeneratorRuntime.mark((function e(n){var t,r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.device,r=n.comp,e.next=3,t.selectConfiguration(1);case 3:return e.next=5,t.claimInterface(1);case 5:r.$store.dispatch("connected",t),o=!0;case 7:if(!o){e.next=20;break}return e.prev=8,e.next=11,t.transferIn(2,128);case 11:a=e.sent,r.$store.dispatch("recv",a),e.next=18;break;case 15:return e.prev=15,e.t0=e["catch"](8),e.abrupt("break",20);case 18:e.next=7;break;case 20:r.$store.commit("setDisconnected");case 21:case"end":return e.stop()}}),e,null,[[8,15]])}))),W.apply(this,arguments)}var X={name:"Connect",data:function(){return{}},methods:{connectUsbDevice:function(){var e=this;navigator.usb.getDevices().then((function(n){n.length>0?e.deviceOpen(n[0]):navigator.usb.requestDevice({filters:[{vendorId:4617,productId:61169}]}).then((function(n){return e.deviceOpen(n)}))}))},deviceOpen:function(e){var n=this;e.open().then((function(){console.log(e),Q({device:e,comp:n})}))}}},Y=X,Z=t("8336"),ee=Object(l["a"])(Y,G,K,!1,null,null,null),ne=ee.exports;m()(ee,{VBtn:Z["a"],VCol:F["a"],VContainer:T["a"],VRow:R["a"]});var te={name:"Home",components:{Connect:ne},methods:{bootload:function(){this.$store.dispatch("sendMessage",{command:11,subcommand:0})}}},re=te,oe=Object(l["a"])(re,q,J,!1,null,null,null),ae=oe.exports;m()(oe,{VBtn:Z["a"],VContainer:T["a"]}),r["a"].use(H["a"]);var ie=[{path:"/",name:"Home",component:ae},{path:"/about",name:"About",component:function(){return t.e("about").then(t.bind(null,"f820"))}}],ce=new H["a"]({mode:"history",base:"/",routes:ie}),se=ce,ue=(t("a15b"),t("d81d"),t("26e9"),t("fb6a"),t("c19f"),t("ace4"),t("0d03"),t("25f0"),t("5cc6"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("170b"),t("b39a"),t("72f7"),t("2f62")),le=function(e){return 65535&e},de=function(e){var n=65535,t=0;return e.map((function(e){t=le(n>>8^e),t^=le(t>>4),n=le(n<<8^t<<12^t<<5^t)})),n},me=de,fe=(t("b0c0"),{1:{name:"PING",subcommands:{}},2:{name:"STATUS",subcommands:{0:{name:"RESPONSE"}},handler:function(e){var n=e.payload;e.subcommand;return console.log("STATUS:",n)}},9:{name:"ERROR",subcommands:{1:{name:"INVALID_PROTOCOL"},2:{name:"INVALID_COMMAND"},3:{name:"INVALID_CHECKSUM"}},handler:function(e){var n=e.subcommand;return console.warn("ERROR RECIBIDO DE OPENEFI:",n)}},10:{name:"HELLO",handler:function(e){var n=e.payload;ge.commit("setPaired",{major:n[0],minor:n[1],rev:n[2]})}}}),pe=fe,ve=function(e,n,t){var r=pe[e];if(r){var o=r.name,a=null;if(0!=n){var i=r.subcommands[n];if(!i)return void console.warn("Subcomando desconocido recibido:",o,n);a=i.name,i.handler&&i.handler({command:o,subcommand:a,payload:t})}r.handler({command:o,subcommand:a,payload:t})}else console.warn("Comando desconocido recibido:",e,n)},be=ve;function he(e){return Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("")}r["a"].use(ue["a"]);var ge=new ue["a"].Store({state:{toogle_menu:!1,usbd:null,writer:null,connected:!1,paired:!1,firmware_ver:{major:null,minor:null,rev:null}},mutations:{setConnection:function(e,n){var t=n.usbd,r=n.writer;e.usbd=t,e.writer=r,e.connected=!0},setDisconnected:function(e){e.connected=!1,e.paired=!1},setPaired:function(e,n){var t=n.major,r=n.minor,o=n.rev;e.firmware_ver={major:t,minor:r,rev:o},e.paired=!0},toogle_menu:function(e,n){e.toogle_menu=n}},actions:{connected:function(e,n){var t=e.commit,r=e.dispatch;t("setConnection",{usbd:n}),r("sendMessage",{command:10,subcommand:0})},sendMessage:function(e,n){var t=e.state,r=n.command,o=n.subcommand,a=n.payload,i=new Uint8Array(new ArrayBuffer(128)),c=new Uint8Array(new ArrayBuffer(123));a&&c.set(a),i.set([1,r,o]),i.set(c,3);var s=me(i.slice(0,126));i.set([s>>0&255,s>>8&255],126),t.usbd.transferOut(1,i)},recv:function(e,n){e.dispatch;var t=new Uint8Array(n.data.buffer);console.log(t);var r=t[0],o=t[1],a=t[2],i=t.slice(3,126),c=he(t.slice(126,128).reverse().buffer),s=("0000"+me(t.slice(0,126)).toString(16)).substr(-4);console.log("Frame recibido\nProtocolo: "+r+"\nComando: "+o+"\nSubcomando: "+a+"\nPayload: "+i+"\nChecksum: "+c),c!=s?(console.warn("Checksums no coinciden!"),console.log("Local:",s)):be(o,a,i)},processCommand:function(e,n){n.command,n.subcommand,n.payload}},getters:{toogle_menu:function(e){return e.toogle_menu}},modules:{}}),we=t("f309");r["a"].use(we["a"]);var _e=new we["a"]({icons:{iconfont:"mdiSvg"},theme:{themes:{light:{secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),ye=(t("d5e8"),t("5363"),t("750b"));r["a"].use(ye["a"]),r["a"].config.productionTip=!1,new r["a"]({router:se,store:ge,vuetify:_e,render:function(e){return e(U)}}).$mount("#app")}});
//# sourceMappingURL=app.5b691188.js.map